<!doctype html><html lang=zh-hant><head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><meta charset=UTF-8><meta name=generator content="Hugo 0.123.8"><meta name=theme-color content="#fff"><meta name=color-scheme content="light dark"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no, date=no, address=no, email=no"><meta http-equiv=Cache-Control content="no-transform"><meta http-equiv=Cache-Control content="no-siteapp"><title>GitHub Pages 绑定个人域名，免 Cloudflare 支持 HTTPS | reuixiy</title>
<link rel=stylesheet href=/css/meme.min.css><script src=/js/meme.min.js></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;500;700&amp;family=Noto+Serif+SC:wght@400;500;700&amp;family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&amp;family=Cinzel+Decorative:wght@700&amp;display=swap" media=print onload='this.media="all"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;500;700&amp;family=Noto+Serif+SC:wght@400;500;700&amp;family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&amp;family=Cinzel+Decorative:wght@700&amp;display=swap"></noscript><meta name=author content="reuixiy"><meta name=description content="今年 5 月 1 号，GitHub Pages 支持自定义域名 Enforce HTTPS 了，并且有原生的 CDN 支持"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=mask-icon href=/icons/safari-pinned-tab.svg color=#fff><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="reuixiy"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=mobile-web-app-capable content="yes"><meta name=application-name content="reuixiy"><meta name=msapplication-starturl content="../../"><meta name=msapplication-TileColor content="#fff"><meta name=msapplication-TileImage content="../../icons/mstile-150x150.png"><link rel=manifest href=/manifest.json><link rel=canonical href=https://io-oi.me/tech/custom-domains-on-github-pages/><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2018-07-18T10:21:39+08:00","dateModified":"2021-01-13T16:10:29+08:00","url":"https://io-oi.me/tech/custom-domains-on-github-pages/","headline":"GitHub Pages 绑定个人域名，免 Cloudflare 支持 HTTPS","description":"今年 5 月 1 号，GitHub Pages 支持自定义域名 Enforce HTTPS 了，并且有原生的 CDN 支持","inLanguage":"zh-hant","articleSection":"tech","wordCount":947,"image":"https://io-oi.me/icons/apple-touch-icon.png","author":{"@type":"Person","description":"Viva La Vida","email":"reuixiy@gmail.com","image":"https://io-oi.me/icons/apple-touch-icon.png","url":"https://io-oi.me/","name":"reuixiy"},"license":"在保留本文作者及本文連結的前提下，非商業用途隨意轉載分享。","publisher":{"@type":"Organization","name":"reuixiy","logo":{"@type":"ImageObject","url":"https://io-oi.me/icons/apple-touch-icon.png"},"url":"https://io-oi.me/"},"mainEntityOfPage":{"@type":"WebSite","@id":"https://io-oi.me/"}}</script><meta name=twitter:card content="summary"><meta name=twitter:site content="@reuixiy"><meta name=twitter:creator content="@reuixiy"><meta property="og:title" content="GitHub Pages 绑定个人域名，免 Cloudflare 支持 HTTPS"><meta property="og:description" content="今年 5 月 1 号，GitHub Pages 支持自定义域名 Enforce HTTPS 了，并且有原生的 CDN 支持"><meta property="og:url" content="https://io-oi.me/tech/custom-domains-on-github-pages/"><meta property="og:site_name" content="reuixiy"><meta property="og:locale" content="zh-hant"><meta property="og:image" content="https://io-oi.me/icons/apple-touch-icon.png"><meta property="og:type" content="article"><meta property="article:published_time" content="2018-07-18T10:21:39+08:00"><meta property="article:modified_time" content="2021-01-13T16:10:29+08:00"><meta property="article:section" content="tech"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Lato:wght@700&amp;text=reuixiy&amp;display=swap" media=print onload='this.media="all"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Lato:wght@700&amp;text=reuixiy&amp;display=swap"></noscript></head><body><div class=container><header class=header><div class=header-wrapper><div class="header-inner single"><div class=site-brand><a href=/ class=brand>reuixiy</a></div><nav class=nav><ul class=menu id=menu><li class=menu-item><a href=/life/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon life"><path d="M301.1 212c4.4 4.4 4.4 11.9.0 16.3l-9.7 9.7c-4.4 4.7-11.9 4.7-16.6.0l-10.5-10.5c-4.4-4.7-4.4-11.9.0-16.6l9.7-9.7c4.4-4.4 11.9-4.4 16.6.0l10.5 10.8zm-30.2-19.7c3-3 3-7.8.0-10.5-2.8-3-7.5-3-10.5.0-2.8 2.8-2.8 7.5.0 10.5 3.1 2.8 7.8 2.8 10.5.0zm-26 5.3c-3 2.8-3 7.5.0 10.2 2.8 3 7.5 3 10.5.0 2.8-2.8 2.8-7.5.0-10.2-3-3-7.7-3-10.5.0zm72.5-13.3c-19.9-14.4-33.8-43.2-11.9-68.1 21.6-24.9 40.7-17.2 59.8.8 11.9 11.3 29.3 24.9 17.2 48.2-12.5 23.5-45.1 33.2-65.1 19.1zm47.7-44.5c-8.9-10-23.3 6.9-15.5 16.1 7.4 9 32.1 2.4 15.5-16.1zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-66.2 42.6c2.5-16.1-20.2-16.6-25.2-25.7-13.6-24.1-27.7-36.8-54.5-30.4 11.6-8 23.5-6.1 23.5-6.1.3-6.4.0-13-9.4-24.9 3.9-12.5.3-22.4.3-22.4 15.5-8.6 26.8-24.4 29.1-43.2 3.6-31-18.8-59.2-49.8-62.8-22.1-2.5-43.7 7.7-54.3 25.7-23.2 40.1 1.4 70.9 22.4 81.4-14.4-1.4-34.3-11.9-40.1-34.3-6.6-25.7 2.8-49.8 8.9-61.4.0.0-4.4-5.8-8-8.9.0.0-13.8.0-24.6 5.3 11.9-15.2 25.2-14.4 25.2-14.4.0-6.4-.6-14.9-3.6-21.6-5.4-11-23.8-12.9-31.7 2.8.1-.2.3-.4.4-.5-5 11.9-1.1 55.9 16.9 87.2-2.5 1.4-9.1 6.1-13 10-21.6 9.7-56.2 60.3-56.2 60.3-28.2 10.8-77.2 50.9-70.6 79.7.3 3 1.4 5.5 3 7.5-2.8 2.2-5.5 5-8.3 8.3-11.9 13.8-5.3 35.2 17.7 24.4 15.8-7.2 29.6-20.2 36.3-30.4.0.0-5.5-5-16.3-4.4 27.7-6.6 34.3-9.4 46.2-9.1 8 3.9 8-34.3 8-34.3.0-14.7-2.2-31-11.1-41.5 12.5 12.2 29.1 32.7 28 60.6-.8 18.3-15.2 23-15.2 23-9.1 16.6-43.2 65.9-30.4 106 0 0-9.7-14.9-10.2-22.1-17.4 19.4-46.5 52.3-24.6 64.5 26.6 14.7 108.8-88.6 126.2-142.3 34.6-20.8 55.4-47.3 63.9-65 22 43.5 95.3 94.5 101.1 59z"/></svg><span class=menu-item-name>生活</span></a></li><li class="menu-item active"><a href=/tech/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tech"><path d="M512 256c0 141.2-114.7 256-256 256C114.8 512 0 397.3.0 256S114.7.0 256 0s256 114.7 256 256zm-32 0c0-123.2-100.3-224-224-224C132.5 32 32 132.5 32 256s100.5 224 224 224 224-100.5 224-224zM160.9 124.6l86.9 37.1-37.1 86.9-86.9-37.1 37.1-86.9zm110 169.1 46.6 94h-14.6l-50-1e2-48.9 1e2h-14l51.1-106.9-22.3-9.4 6-14 68.6 29.1-6 14.3-16.5-7.1zm-11.8-116.3 68.6 29.4-29.4 68.3L230 246l29.1-68.6zm80.3 42.9 54.6 23.1-23.4 54.3-54.3-23.1 23.1-54.3z"/></svg><span class=menu-item-name>技術</span></a></li><li class=menu-item><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon about"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6.0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7.0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4.0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9s28-2.7 40.9-6.9c2.3-.7 4.7-1.1 7.1-1.1 42.9.0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><span class=menu-item-name>述身</span></a></li><li class=menu-item><a id=theme-switcher href=#><span class="icon theme-icon-light">🌞</span><span class="icon theme-icon-dark">🌙</span></a></li></ul></nav></div></div><input type=checkbox id=nav-toggle aria-hidden=true>
<label for=nav-toggle class=nav-toggle></label>
<label for=nav-toggle class=nav-curtain></label></header><main class="main single" id=main><div class=main-inner><article class="content post h-entry" data-align=justify data-type=tech data-toc-num=true><h1 class="post-title p-name">GitHub Pages 绑定个人域名，免 Cloudflare 支持 HTTPS</h1><div class="post-description p-summary">今年 5 月 1 号，GitHub Pages 支持自定义域名 Enforce HTTPS 了，并且有原生的 CDN 支持</div><div class="post-body e-content"><p><img alt=custom-domains-on-github-pages.png src=/images/custom-domains-on-github-pages.png><span class=caption>◎ HTTPS</span></p><p style=text-indent:0><span class=drop-cap>购</span>买域名就不说了，如果想省去备案的麻烦，就不要到国内的域名服务商注册，选择一些国外的大公司，比如 <a href=https://sg.godaddy.com/zh/ target=_blank rel=noopener>GoDaddy</a>。</p><h2 id=配置-dns><a href=#配置-dns class=anchor-link>#</a>配置 DNS</h2><p>这里以 GoDaddy 为例，添加 4 个 A 记录和 1 个 CNAME：<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>[1]</a></sup></p><div class=table-container><table><thead><tr><th style=text-align:center>类型</th><th style=text-align:center>名称</th><th style=text-align:center>值</th></tr></thead><tbody><tr><td style=text-align:center>A</td><td style=text-align:center>@</td><td style=text-align:center>185.199.108.153</td></tr><tr><td style=text-align:center>A</td><td style=text-align:center>@</td><td style=text-align:center>185.199.109.153</td></tr><tr><td style=text-align:center>A</td><td style=text-align:center>@</td><td style=text-align:center>185.199.110.153</td></tr><tr><td style=text-align:center>A</td><td style=text-align:center>@</td><td style=text-align:center>185.199.111.153</td></tr><tr><td style=text-align:center>CNAME</td><td style=text-align:center>www</td><td style=text-align:center>yixiuer.github.io</td></tr></tbody></table></div><p>建议将默认添加的几行删除，以免产生解析错误，可以参考我的，上面的 5 行即我自行添加的：</p><p><img alt=godaddy-dns.jpg src=/images/godaddy-dns.jpg></p><p>怎么查看域名是否已经解析成功了呢？<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>[2]</a></sup></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ dig +noall +answer example.com
</span></span><span class=line><span class=cl><span class=p>;</span>example.com.
</span></span><span class=line><span class=cl>example.com.   <span class=m>3600</span>  IN  A 185.199.108.153
</span></span><span class=line><span class=cl>example.com.   <span class=m>3600</span>  IN  A 185.199.109.153
</span></span><span class=line><span class=cl>example.com.   <span class=m>3600</span>  IN  A 185.199.110.153
</span></span><span class=line><span class=cl>example.com.   <span class=m>3600</span>  IN  A 185.199.111.153
</span></span></code></pre></div><p>Linux 下输入以上命令，得到以上结果即表明域名解析成功，可以进入下一步了。</p><h2 id=custom-domain><a href=#custom-domain class=anchor-link>#</a>Custom domain</h2><p>稍等一会等域名解析生效，接下来去 GitHub 配置：</p><p><img alt=custom-domains-on-github-pages-1.jpg src=/images/custom-domains-on-github-pages-1.jpg></p><p>滚动鼠标，页面下拉，找到下面内容：</p><p><img alt=custom-domains-on-github-pages-2.jpg src=/images/custom-domains-on-github-pages-2.jpg></p><p>在①填入你注册的域名后 <code>Save</code>，等待几小时生成证书，然后在②处勾选 <code>Enforce HTTPS</code>，相关信息会在页面加载后不久显示在③处，部署成功就会显示为我的截图中相关内容。</p><h2 id=博客相关配置><a href=#博客相关配置 class=anchor-link>#</a>博客相关配置</h2><p>在等待证书生成的时候就可以配置下博客，首先添加 CNAME 文件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>yixiuer.me
</span></span></code></pre></div><p>文件位置：<code>~/blog/source/CNAME</code>（Hexo）；<code>~/blog/static/CNAME</code>（Hugo）。</p><p>注意没有文件扩展名，如果你是在 Windows 下用记事本新建的，请<a href=https://jingyan.baidu.com/article/f00622282564bdfbd3f0c827.html target=_blank rel=noopener>设置</a>后将扩展名删除。</p><p>Hexo 中，然后修改站点配置文件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl># 文件位置：~/blog/_config.yml
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># URL
</span></span><span class=line><span class=cl>## If your site is put in a subdirectory, set url as &#39;http://yoursite.com/child&#39; and root as &#39;/child/&#39;
</span></span><span class=line><span class=cl><span class=gd>- url: https://yixiuer.github.io/
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+ url: https://yixiuer.me/
</span></span></span></code></pre></div><p>记得 <code>hexo d</code> 更新博客，最后只需静候证书生成就 OK 啦🍻～</p><p>另外，根据 The GitHub Blog 的相关内容<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>[3]</a></sup>：</p><blockquote class="quote en"><p>These new IP addresses don’t just allow us to serve your site over HTTPS, but also places your site behind a content delivery network (CDN), allowing us to serve your site from data centers around the world at fast speeds, and offering additional protection against DDoS attacks. While the previous IP addresses will remain available for a transition period, we recommend you migrate to the new IP addresses to gain these benefits.</p></blockquote><p>如果你之前配置过 DNS，用的还是老的 IP 地址，现在快点将你的 A 记录中的 IP 值更改为新的吧！</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>参考：<a href=https://www.zhihu.com/question/31377141/answer/103056861 target=_blank rel=noopener>https://www.zhihu.com/question/31377141/answer/103056861</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>来源：<a href=https://help.github.com/articles/setting-up-an-apex-domain/ target=_blank rel=noopener>https://help.github.com/articles/setting-up-an-apex-domain/</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>来源：<a href=https://blog.github.com/2018-05-01-github-pages-custom-domains-https/ target=_blank rel=noopener>https://blog.github.com/2018-05-01-github-pages-custom-domains-https/</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><footer class=minimal-footer><div class=post-tag><a href=/tags/hexo/ rel=tag class=post-tag-link>#hexo</a></div><div class=post-category><a href=/tech/ class="post-category-link active">tech</a> | <a href=/life/ class=post-category-link>life</a></div></footer></div></main></div><script>"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js")})</script><script src=/libs/medium-zoom.min.js></script><script>let imgNodes=document.querySelectorAll("div.post-body img");imgNodes=Array.from(imgNodes).filter(e=>e.parentNode.tagName!=="A"),mediumZoom(imgNodes,{background:"hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)"})</script></body></html>